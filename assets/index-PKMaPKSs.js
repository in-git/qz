import{_ as N}from"./AxHeader-CKP6WWHv.js";import{l as I,a as K}from"./post-BY7yLedj.js";import{a as B,u as M}from"./table.hook-DYrh3fH1.js";import{r as k,f as v,h as z,i as $,o as l,j as m,w as o,u as t,c as y,F as P,q as S,a as e,C as w,G as L,b as h,H as F,_ as b,k as H,I as U,J as V,K as j,M as Q,N as q,O as A,L as D,p as E}from"./index-B6vKab5y.js";import{c as G,_ as J}from"./format-D1INDC2X.js";import"./nav-Wi7YOkNt.js";const g=B(),s=M(),C=k({expandKeys:["resource"],selectedKeys:["resource"]}),x=async()=>{g.value.loading=!0;const{data:i}=await I(s.value);g.value.data=i.rows,s.value.total=i.total,g.value.loading=!1},O=()=>{s.value.page=1,x()},R={key:0,class:"grid gap-4 grid-cols-1 sm:grid-cols-3 lg:grid-cols-4"},W=["onClick"],X={class:"sm:h-[160px] h-[120px] overflow-hidden bg-gray-100"},Y=["alt","src"],Z=v({__name:"PostList",setup(i){let r="https://api.r10086.com/樱道随机图片api接口.php?自适应图片系列=原神";const a=z(),u=_=>{a.push(`/detail?id=${_}`)};return $(async()=>{await x()}),(_,n)=>{const d=F,p=w,f=L;return l(),m(p,{loading:t(g).loading},{default:o(()=>[t(g).data.length>0?(l(),y("ul",R,[(l(!0),y(P,null,S(t(g).data,(c,T)=>(l(),y("li",{key:T,class:"flex gap-4 item cursor-pointer",onClick:ct=>u(c.id)},[e(p,{class:"w-full"},{cover:o(()=>[h("div",X,[h("img",{class:"w-full object-cover h-fit",alt:c.postTitle,src:`${t(r)}&id=${Math.random()}`},null,8,Y)])]),default:o(()=>[e(d,{title:c.postTitle,description:c.postDesc},null,8,["title","description"])]),_:2},1024)],8,W))),128))])):(l(),m(p,{key:1},{default:o(()=>[e(f)]),_:1}))]),_:1},8,["loading"])}}}),tt=b(Z,[["__scopeId","data-v-d2b8b336"]]),et={class:"flex gap-4"},at=v({__name:"PostHead",setup(i){return(r,a)=>{const u=U,_=V,n=j,d=Q,p=q,f=w;return l(),m(f,{class:"mb-4",title:"筛选"},{default:o(()=>[e(p,null,{default:o(()=>[e(n,null,{default:o(()=>[h("div",et,[e(u,{onSearch:t(O),value:t(s).postTitle,"onUpdate:value":a[0]||(a[0]=c=>t(s).postTitle=c),placeholder:"请输入文章标题",class:"w-fit"},null,8,["onSearch","value"]),e(_,{onClick:t(x)},{default:o(()=>a[2]||(a[2]=[H("刷新")])),_:1},8,["onClick"])])]),_:1}),h("div",null,[e(d,{current:t(s).pageNum,"onUpdate:current":a[1]||(a[1]=c=>t(s).pageNum=c),total:t(s).total,"show-size-changer":"","page-size":t(s).pageSize},null,8,["current","total","page-size"])])]),_:1})]),_:1})}}}),ot=v({__name:"PostMenu",setup(i){const r=k([]),a=k(!1),u=async()=>{a.value=!0;const{data:n}=await K();a.value=!1,r.value=G(n.data)},_=n=>{console.log(n),s.value.categoryId=n,s.value.pageNum=1,x()};return $(async()=>{await u()}),(n,d)=>{const p=J,f=L,c=w;return l(),m(c,{class:"menu w-full",bordered:!1,title:"文章分类"},{default:o(()=>[t(r).length>0?(l(),m(p,{key:0,data:t(r),"expanded-keys":t(C).expandKeys,"selected-keys":t(C).selectedKeys,onCheck:_},null,8,["data","expanded-keys","selected-keys"])):(l(),m(f,{key:1,class:"w-[100%]"}))]),_:1})}}}),st=b(ot,[["__scopeId","data-v-3a52a39a"]]),nt=v({__name:"index",setup(i){return(r,a)=>{const u=N,_=A,n=D,d=E;return l(),y(P,null,[e(u,{title:"动态全知"}),e(d,{class:"p-4"},{default:o(()=>[e(_,{theme:"light",width:260,class:"sm:block hidden"},{default:o(()=>[e(st)]),_:1}),e(n,{class:"sm:pl-4"},{default:o(()=>[e(at),e(tt)]),_:1})]),_:1})],64)}}}),dt=b(nt,[["__scopeId","data-v-a329f8db"]]);export{dt as default};
